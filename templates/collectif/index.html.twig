{% extends 'base.html.twig' %}

{% block title %}Collectif index{% endblock %}

{% block body %}
    <h1>Liste des collectifs</h1>

    <a class="btn btn-primary" href="{{ path('app_collectif_new') }}">Création (avant d'en créer un, vérifiez qu'il n'y est pas déjà)</a>

    <table data-toggle="table"
           data-url="{{ path('app_collectif_json') }}"
           data-pagination="true"
           data-click-to-select="true"
           data-remember-order="true"
           data-sortable="true"
           id="table"
           data-filter-control="true"
           data-show-columns="true"
           data-fixed-columns="true"
           data-sticky-header="true"
           data-page-size="25"
           data-export-types="['csv', 'txt', 'excel']"
           data-show-export="true"
           data-show-search-clear-button="true"
    >
        <thead  class="table-primary">
        <tr>
            <th data-sortable="true" data-field="nom"  data-filter-control="input">Nom du collectif</th>
            <th data-sortable="true" data-field="abreviation"  data-filter-control="input">Abréviation</th>
            <th data-sortable="true" data-field="mail"  data-filter-control="input">E-mail</th>
            <th data-sortable="true" data-field="telephone"  data-filter-control="input">Téléphone</th>
            <th data-sortable="true" data-field="siret"  data-filter-control="input">Siret</th>
            <th data-sortable="true" data-field="codepostal"  data-filter-control="input">Code postal</th>
            <th data-sortable="true" data-field="datecreation"  data-filter-control="input">date de création</th>
            <th data-sortable="true" data-field="id"  data-filter-control="input">id</th>
            <th data-field="id" data-formatter="actionFormatter" >Actions</th>
        </tr>
        </thead>
    </table>

{% endblock %}
{% block javascripts %}
    {{ parent() }}

    <script>
        function actionFormatter(value) {
            var detailUrl = "{{ path('app_collectif_edit', {'id': 'monId'}) }}";
            detailUrl = detailUrl.replace("monId",value);
            console.log(detailUrl);

            var buttonDetail =  '<a class="btn btn-info"  data-position="top" data-alignment="center" href="' + detailUrl + '">Modification</a>';

            console.log(buttonDetail);
            return buttonDetail /*+ spanCtrl + button + modalShow + closeSpan*/;
        }



    </script>
{% endblock %}