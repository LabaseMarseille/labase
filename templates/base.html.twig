<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    {# Recommandation BS https://getbootstrap.com/docs/5.2/getting-started/introduction/#responsive-meta-tag #}
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}{{ app_title|trans }}{% endblock %}</title>

    <link rel="icon" type="image/x-icon" href="{{ asset('build/images/favicon.ico') }}"/>
    {{ encore_entry_link_tags('app') }}
    {{ encore_entry_script_tags('app') }}

    {% block stylesheets %}
    {% endblock %}

    {% block javascripts %}
    {% endblock %}
</head>
<body>
<div>
    <a class="visually-hidden-focusable" href="#topbar">{{ "app_goTopbar"|trans }}</a>
    <a class="visually-hidden-focusable" href="#sidebar">{{ "app_goSidebar"|trans }}</a>
    <a class="visually-hidden-focusable" href="#content">{{ 'app_goContent'|trans }}</a>
</div>

<header>
    <nav id="topbar"
         class="navbar navbar-expand-lg fixed-top {% if is_granted('ROLE_PREVIOUS_ADMIN') %}bg-danger{% else %}bg-amu-main{% endif %}">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <img id="navbar-brand-img" src="{{ asset('build/images/LogoAmuBlanc62.svg') }}" alt="logo AMU">
                <span id="navbar-brand-name">{{ app_title }}</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown"
                    aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-end" id="navbarNavDropdown">
                {{ knp_menu_render('topMenu', {'template': 'menu/knp_menu_sidebar_trans.html.twig', 'currentClass': 'active'}) }}
            </div>
        </div>
    </nav>
</header>

<div class="main-container">
    <nav id="sidebar" class="navbar navbar-expand-lg ">
        {% block app_menu %}
            {{ knp_menu_render('mainMenu', {'template': 'menu/knp_menu_sidebar_trans.html.twig', 'currentClass': 'active'}) }}
        {% endblock %}
    </nav>
    <main>
        <div class="main-content container-fluid {% if app.environment == "test" %} is-test {% endif %}">
            {% include 'siamu/siamu.html.twig' %}
            <div id="content">
                {% block body %}{% endblock %}
            </div>
        </div>
    </main>
</div>

<footer>
    {% set currentRoute = app.request.attributes.get('_route') %}
    {% set currentRouteParams = app.request.attributes.get('_route_params') %}

    {% set routeParamsFr = currentRouteParams|merge({'_locale': 'fr'}) %}
    {% set routeParamsEn = currentRouteParams|merge({'_locale': 'en'}) %}

    <a target="_blank" href="https://dirnum.univ-amu.fr/fr/pole-developpement">
        <small>{{ "app_footer"|trans }}
            <span id="link-translation">
                <a href="{{ path(currentRoute, routeParamsFr) }}">FR</a>/<a
                        href="{{ path(currentRoute, routeParamsEn) }}">EN</a>
            </span>
        </small>
    </a>
</footer>
</body>
</html>
